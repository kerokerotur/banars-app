# イベント詳細 (Event Detail)

## 目的
- イベントに必要な情報（会場、タイムライン、持ち物、参加メンバーなど）を 1 画面で確認できるようにする。
- 運営のみが編集系 CTA を表示し、メンバーは閲覧と出欠操作に集中できる構成を保つ。

## 表示項目
- 基本情報: タイトル、開催日時（開始/集合）、会場住所、Google Maps へのディープリンク。
- 参加セクション: 出欠ステータス別の人数カウント、最新コメント 3 件。
- メモ/持ち物: Markdown 風テキストを `flutter_markdown` で描画。
- 管理操作: `manager` 権限のみ「編集」「削除」ボタンを表示。

## データソース
- `events` テーブルを `id` 指定で取得し、`attendance_summary` ビューと結合して人数を取得。
- コメントは `attendance_comments` を `event_id` で絞り、最新順で 3 件。
- Google Maps 連携には `place_id` と `lat/lng` を保持しているため、URL 生成関数でリンク作成。

## 技術ポイント
- 詳細画面は `FutureBuilder` で単発取得 → `stream()` に切り替えて差分受信し、編集結果を即反映。
- コメントは表示専用 API を別クエリで呼び、必要な時だけ追加ロードすることでデータ転送量を抑える。

## 決定理由
- 参加状況を同画面で見られることで、運営がメンバーへの声かけを判断しやすくする運用課題への対応。
- 編集/削除を詳細画面から直接行えることで、同一コンテキスト内で操作を完結させ、画面遷移数を最小化する。
